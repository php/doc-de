<?xml version="1.0" encoding="iso-8859-1"?>
 <chapter id="features.remote-files">
  <title>Zugriff auf entfernte Dateien</title>

  <para>
   Wenn die Unterstützung für den &quot;URL fopen wrapper&quot; bei der
   Konfiguration von PHP vorhanden ist (welche standardmäßig eingestellt ist, es sei denn,
   die Option <option>--disable-url-fopen-wrapper</option> wurde bei der Installation verwendet (Versionen 
   bis 4.0.3) oder der Parameter <parameter>allow_url_fopen</parameter> in der php.ini 
   deaktiviert wurde (neuere Versionen),
   können HTTP und FTP URLs bei den meisten Funktionen verwendet werden, die einen
   Dateinamen als Parameter benötigen, inklusive <function>require</function>
   und <function>include</function> Anweisungen.
  </para>
  <para>
   <note>
    <para>
     remote files funktionieren nicht mit <function>include</function> und
     <function>require</function> Anweisungen unter Windows.
    </para>
   </note>
  </para>
  <para>
   Beispielsweise kann eine Datei auf einem anderen Webserver geöffnet und verarbeitet werden. 
   Diese Daten können zur Abfrage einer Datenbank benutzt werden oder passend zum Rest der eigenen 
   Website ausgegeben werden.
  </para>
  <para>
   <example>
    <title>Den Titel einer entfernten Seite auslesen</title>
    <programlisting role="php">
<![CDATA[
<?php
$file = fopen ("http://www.php.net/", "r");
if (!$file) {
    echo "<p>Datei konnte nicht ge&uuml;ffnet werden.\n";
    exit;
}
while (!feof ($file)) {
    $line = fgets ($file, 1024);
    /* Funktioniert nur, wenn Titel und title-Tags in einer Zeile stehen */
    if (eregi ("<title>(.*)</title>", $line, $out)) {
        $title = $out[1];
        break;
    }
}
fclose($file);
?>
]]>
    </programlisting>
   </example>
  </para>
  <para>
   Auch eine Datei auf einem FTP-Server kann geschrieben werden, solange man sich über 
   einen Benutzer mit entsprechenden Zugriffsrechten verbindet und die Datei noch nicht existiert.
   Um sich mit einem anderen Benutzer als 'anonymous' zu verbinden muß ein
   username (und möglichst ein Passwort) innerhalb der URL angegeben werden, wie z.B.
   'ftp://user:password@ftp.example.com/pfad/zur/datei'. (Die selbe Syntax 
   kann verwendet werden, um auf Daten via HTTP zuzugreifen, wenn diese eine Basic
   Authentication benötigen.)
  </para>
  <para>
   <example>
    <title>Daten auf einen entfernten Server speichern</title>
    <programlisting role="php">
<![CDATA[
<?php
$file = fopen ("ftp://ftp.php.net/incoming/outputfile", "w");
if (!$file) {
    echo "<p>Datei konnte zum schreiben nicht ge&ouml;ffnet werden.\n";
    exit;
}
/* Schreibe die Daten hier hin. */
fputs ($file, "$HTTP_USER_AGENT\n");
fclose ($file);
?>
]]>  
    </programlisting>
   </example>
  </para>
  <para>
   <note>
    <para>
     Obiges Beispiel könnte dazu verleiten, dieses Verfahren zu benutzen, um in ein 'remote log-file' 
     zu schreiben. Wie oben erwähnt kann man jedoch ausschließlich neue Dateien anlegen, 
     wenn man URL fopen() wrapper benutzt. Für 'distributed logging' sollte man sich die Funktion 
     <function>syslog</function> anschauen.
    </para> 
   </note>
  </para>

 </chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
