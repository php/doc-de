<?xml version="1.0" encoding="iso-8859-1"?>
<!-- EN-Revision: 1.9 Maintainer: ali Status: ready -->
  <refentry id="function.curl-setopt">
   <refnamediv>
    <refname>curl_setopt</refname>
    <refpurpose>Eine Option für einen cRUL Transfer setzen</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
     <methodsynopsis>
      <type>bool</type><methodname>curl_setopt</methodname>
      <methodparam><type>resource</type><parameter>ch</parameter></methodparam>
      <methodparam><type>string</type><parameter>option</parameter></methodparam>
      <methodparam><type>mixed</type><parameter>value</parameter></methodparam>
     </methodsynopsis>
    <para>
     Die Funktion <function>curl_setopt</function> setzt Optionen
     für eine cURL-Session, die durch den <parameter>ch</parameter>
     Parameter identifiziert ist. Der <parameter>option</parameter> 
     Parameter stellt die Option dar, die mit dem Wert des Parameters 
     <parameter>value</parameter> besetzt werden soll. 
    </para>
    <para>
     Der Wert <parameter>value</parameter> sollte für folgende Optionen
     (angegeben in dem <parameter>option</parameter> Parameter) vom Typ 
     long sein:
     <itemizedlist>
      <listitem>
       <simpara>
        <parameter>CURLOPT_INFILESIZE</parameter>: Wenn eine Datei hochgeladen 
        wird, sollte diese Option genutzt werden, um PHP mitzuteilen 
        welche erwartete Größe das Infile hat.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_VERBOSE</parameter>: Bei Setzen dieser 
        Option auf einen Wert ungleich ungleich <literal>0</literal> (Null) 
        wird cURL eine sehr detailierte Ausgabe vornehmen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>       
        <parameter>CURLOPT_HEADER</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null)
        wird cURL den Header in die Ausgabe aufnehmen.
       </simpara>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_NOPROGRESS</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        angewiesen kein cURL progress-meter für cURL Transfers anzuzeigen.
        <note>
         <simpara>
          PHP setzt die Option automatisch auf einen Wert ungleich
          <literal>0</literal> (Null). Dies sollte ausschließlich für die
          Fehlersuche geändert werden.
         </simpara>
        </note>
       </para>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_NOBODY</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird der
        Body nicht in die Ausgabe aufgenommen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FAILONERROR</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        angewiesen bei misslungenen Aktionen (wenn der HTTP-Code größer ist
        als 300), ohne Fehlermeldung weiter zu arbeiten. Dieses Verhalten ist
        voreingestellt.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_UPLOAD</parameter>: Bei Setzen dieser 
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        auf ein Upload vorbereitet.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_POST</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        angewiesen die reguläre HTTP <literal>POST</literal> Methode zu nutzen.
        Dieses ist ein <literal>application/x-www-form-urlencoded</literal>,
        was meist von HTML Formularen genutzt wird.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FTPLISTONLY</parameter>: Bei Setzen dieser 
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        nur die Namen der FTP Verzeichnisse auflisten.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FTPAPPEND</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        angewiesen die Übertragung der Datei fortzusetzen, anstatt jene zu
        überschreiben.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_NETRC</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        die lokale Datei <filename>~./netrc</filename> absuchen, um den
        Benutzternamen und das Passwort zu finden mit dem die Autorisierung
        geschehen soll.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FOLLOWLOCATION</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird jedem
        "Location: " (Ein Feld des HTTP-Headers) gefolgt. Zu beachten ist,
        dass dies rekursiv geschieht.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_PUT</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird
        ein HTTP <literal>PUT</literal> einer Datei durchgeführt. Diese Datei 
        muss mit <parameter>CURLOPT_INFILE</parameter> gesetzt und mit
        <parameter>CURLOPT_INFILESIZE</parameter> näher beschrieben werden.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_MUTE</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) wird PHP
        keine Ausgabe bezüglich der cURL Funktionen machen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_TIMEOUT</parameter>: Ein Wert vom Typ long wird als
        Parameter übergeben und gibt die Zeit in Sekunden an, die die
        cURL-Funktionen haben, um die gewünschten Aktionen durchzuführen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_LOW_SPEED_LIMIT</parameter>: Ein Wert vom Typ long
        wird als Parameter übergeben. Er gibt die Transfergeschwindigkeit in
        Bytes pro Sekunde an, die bei Unterschreitung in Kombination mit der
        Überschreitung von <parameter>CURLOPT_LOW_SPEED_TIME</parameter>
        Sekunden bewirkt, dass der Transfer aufgrund der zu niedrigen 
        Transferrate abgebrochen wird.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_LOW_SPEED_TIME</parameter>: Ein Wert vom Typ long
        wird als Parameter übergeben und gibt die Zeit in Sekunden an, in der
        die Transferrate unter <parameter>CURLOPT_LOW_SPEED_LIMIT</parameter>
        gedultet wird. Nach dieser Zeit wird die Transferrate als zu langsam
        angesehen und der Transfer wird beendet.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_RESUME_FROM</parameter>: Ein Wert vom Typ long
        wird als Parameter erwartet und gibt den Offset in Bytes an, an dem 
        der Transfer forgesetzt werden soll.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_CAINFO</parameter>: Als Parameter wird ein
        Dateiname erwartet, die ein oder mehrere Zertifikate enthält, mit
        dem am Peer verfiziert werden kann. Die Nutzung dieser Option
        macht nur in Kombination mit
        <parameter>CURLOPT_SSL_VERIFYPEER</parameter> Sinn.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSL_VERIFYPEER</parameter>: Ein Wert vom Typ long
        wird als Parameter übergeben. Ist dieser gleich <literal>0</literal> (Null)
        stellt cURL die Überprüfung des Peerzertifikats ein.
        (Ab cURL 7.10 ist die Voreinstellung für diese Option &true;.)
        Alternative Zertifikate zur Überprüfung können mit der
        <parameter>CURLOPT_CAINFO</parameter> Option angegeben werden
        (hinzugefiügt in cURL 7.9.8) oder ein Zertifikat-Verzeichniss kann mit 
        <parameter>CURLOPT_CAPATH</parameter> ausgewiesen werden. Ab cURL
        7.10, installiert cURL ein vorgegebenes default Packet. 
        <parameter>CURLOPT_SSL_VERIFYHOST</parameter> muss ggf. auf
        <literal>1</literal> oder <literal>0</literal> gesetzt werden, falls
        <parameter>CURLOPT_SSL_VERIFYPEER</parameter> 
        deaktiviert (also auf <literal>2</literal> gesetzt) ist.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSLVERSION</parameter>: Ein Wert vom Typ long wird
        als Parameter erwartet und gibt die SSL Version (<literal>2</literal> 
        oder <literal>3</literal>) an die genutzt werden soll. PHP wird selber 
        versuchen eine herauszusuchen, trotzdem erfordern einige Situationen 
        das manuelle Setzen dieser Option.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSL_VERIFYHOST</parameter>: Setzen Sie einen Wert
        vom Typ long falls cURL den Namen des Peer Zertifikates beim SSL
        Handshake überprüfen sollte. Der Wert <literal>1</literal>deutet an,
        dass nach der Existenz des Namens gesehen werden soll, der Wert
        <literal>2</literal> deutet an, dass sichergestellt werden soll, dass
        eine Übereinstimmung mit dem angegebenen Hostnamen vorliegt.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_TIMECONDITION</parameter>: Ein Wert vom Typ long
        wird erwartet und gibt an wie <parameter>CURLOPT_TIMEVALUE</parameter>
        behandelt werden soll.
        Diser Wert kann auf TIMECOND_IFMODSINCE oder TIMECOND_ISUNMODSINCE
        gesetzt werden. Dies ist nur eine Besonderheit des HTTPs'.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_TIMEVALUE</parameter>: Ein Wert vom Typ long 
        wird erwartet und gibt die Zeit in Sekunden seit dem 1. Januar 1970 an.
        Die Zeit wird wie mit Hilfe von
        <parameter>CURLOPT_TIMEVALUE</parameter> definiert, oder es wird wie
        per Voreinstellung TIMECOND_IFMODSINCE, genutzt.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_RETURNTRANSFER</parameter>: Bei Setzen dieser
        Option auf einen Wert ungleich <literal>0</literal> (Null) gibt cURL
        den Transfer zurück, anstatt die Ausgabe vorzunehmen.
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <para>
     Der <parameter>value</parameter> Parameter sollte für folgende
     <parameter>option</parameter> Parameter ein String sein:
     <itemizedlist>
      <listitem>
       <simpara>
        <parameter>CURLOPT_URL</parameter>: Dies ist die URL, die PHP abrufen
        soll. Beim Initialisieren eine Session mit
        <function>curl_init</function> kann diese Option ebenfalls gesetzt
        werden.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_USERPWD</parameter>: Erwartet wird ein String in
        dem Format [Benutzername]:[Passwort], den PHP für die Verbindung
        nutzt.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_PROXYUSERPWD</parameter>: Erwartet einen String in
        dem Format [Benutztername]:[Passwort] für die Verbindung mit einem
        HTTP-Proxy.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_RANGE</parameter>: Übergeben wird das gewünschte
        Intervall. Es sollte in dem Format "X-Y" sein, wobei X oder Y
        ausgelassen werden sollen. Transfers über das HTTP unterstützen
        ebenfalls Intervalle, die mit Kommas getrennt werden (X-Y,N-M).
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_POSTFIELDS</parameter>: Übergeben wird ein String,
        der die gesamten Daten enhält, die in einer HTTP 
        <literal>POST</literal> Aktion gesendet werden sollen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_REFERER</parameter>: Übergeben wird ein String,
        der den Wert des Referer-Feldes im HTTP Header enthält und in einer
        HTTP Anfrage genutzt werden soll.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_USERAGENT</parameter>: Übergeben wird ein String,
        der den Wert des User-Agent-Feldes im HTTP Header enthält und in einer
        HTTP Anfrage genutzt werden soll.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FTPPORT</parameter>: Übergeben wird ein String,
        der genutzt wird, um die IP-Adresse zu erlangen, die von der FTP 
        <literal>POST</literal> Answeisung genutzt wird. 
        Die <literal>POST</literal> Anweisung teilt dem entfernten Server mit, 
        zu der angegebenen IP-Adresse zu verbinden . Der String kann eine 
        einfache IP-Addresse, ein Hostname, der Name eines Netzwerkinterfaces 
        (unter Unix), oder nur '-' sein, um die vordefinierte IP-Addresse (des
        Systems) zu nutzen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_COOKIE</parameter>: Übergeben wird ein String, der 
        den Inhalt des Cookies enthält, der in dem HTTP-Header gesetzt werden 
        soll.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSLCERT</parameter>: Übergeben wird ein String, 
        der den Namen der Datei enhält, die das PEM formatierte Zertifikat
        enthält.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_SSLCERTPASSWD</parameter>: Übergeben wird ein 
        String, der das Passwort enthält welches erforderlich ist, um das 
        <parameter>CURLOPT_SSLCERTM</parameter> Zertifikat zu nutzen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_COOKIEFILE</parameter>: Übergeben wird ein String, 
        der den Namen der Datei enhält, die die Cookiedaten enthält.
        Diese Datei kann im Netscape Format sein, oder HTTP geformte Header in 
        einer einfachen Textdatei.
       </simpara>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_CUSTOMREQUEST</parameter>: Übergeben wird ein 
        String, der als Kommando an Stelle von <literal>GET</literal> oder
        <literal>HEAD</literal> bei einer HTTP-Anfrage genutzt werden  soll.        
        Dies ist nützlich wenn z.B. ein <literal>DELETE</literal> oder andere 
        weniger übliche Anfragen ausgeführt werden sollen. Gültige Werte 
        sind z.B. <literal>GET</literal>, <literal>POST</literal> usw. 
        Vollständige HTTP-Anfragen, wie 'GET /index.html HTTP/1.0\r\n\r\n' 
        sind ungültig.
        <note>
         <simpara>
          Führen Sie diese Anfragen nicht durch ohne sicherzugehen, dass Ihr Server 
          die betreffenden Kommandos unterstützt. 
         </simpara>
        </note>
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_PROXY</parameter>: Übergeben wird ein String, der 
        den Namen des HTTP-Proxies angibt über den die Anfragen geleitet 
        werden sollen.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_INTERFACE</parameter>: Übergeben wird ein String, 
        der den Namen des zu nutzenden Netzwerkinterfaces für ausgehende Daten 
        enthält. Neben dem Namen des Interfaces, kann auch eine IP-Adresse 
        oder ein Hostname übergeben werden.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_KRB4LEVEL</parameter>: Übergeben Sie die KRB4 
        (Kerberos 4) Sicherheitsstufe. Folgende Werte (von niedriger zu 
        höherer Stufe) sind gültig: 'clear', 'safe', 'confidential', 
        'private'. Sollte der String keine dieser Werte enthalten, dann wird 
        die hóchste Stufe, d.h 'private' genutzt. Sollte diese Option mit dem 
        Wert <literal>NULL</literal> besetzt werden, wird KRB4 Security 
        deaktiviert. Bislang wird KRB4 nur unter Verwendung des FTP unterstützt.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_HTTPHEADER</parameter>: Übergeben wird ein Array 
        mit HTTP-Header, die gesetzt werden sollen. 
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_QUOTE</parameter>: Übergeben wird ein Array mit 
        FTP-Kommandos, die vor der FTP Anfrage auf dem Server ausgeführt 
        werden sollen.
       </para>
      </listitem>
      <listitem>
       <para>
        <parameter>CURLOPT_POSTQUOTE</parameter>: Übergeben wird ein Array
        FTP-Kommandos, die nach der FTP Anfrage auf dem Server ausgeführt
        werden sollen.
       </para>
      </listitem>
     </itemizedlist>
    </para>
    <para>
     Die folgenden Optionen erwarten einen Dateizeiger, der mit Hilfe von
     <function>fopen</function> erstellt werden kann:
     <itemizedlist>
      <listitem>
       <simpara>
        <parameter>CURLOPT_FILE</parameter>: Die Datei, in die die Ausgabe des
        Transfers geschrieben werdem soll. Voreingestellt ist 
        <literal>STDOUT</literal>.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_INFILE</parameter>: Die Datei aus der die Daten
        des Transfers stammt. 
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_WRITEHEADER</parameter>: Die Datei in die die
        Header-Teile der Ausgabe geschrieben werden sollen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        <parameter>CURLOPT_STDERR</parameter>: Die Datei, in die die
        aufgetretenen Fehler geschrieben werden sollen anstatt nach 
        <literal>STRDERR</literal>.
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <para>
     <example>
      <title>
       Initialisierung einer neunen cURL-Session und das abrufen einer 
       Webseite
       </title>
      <programlisting role="php">
<![CDATA[
<?php
   // erzeuge einen neuen cURL-Handle
   $ch = curl_init();
    
   // setze die URL und andere Optionen
   curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
   curl_setopt($ch, CURLOPT_HEADER, 0);
    
   // führe die Aktion aus und gebe die Daten an den Browser weiter
   curl_exec($ch);
    
   // schließe den cURL-Handle und gebe die Systemresourcen frei
   curl_close($ch);
?>
]]>
      </programlisting>
     </example>    
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
