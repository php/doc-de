<?xml version="1.0" encoding="iso-8859-1"?>
 <reference id="ref.mysql">
  <title>MySQL Funktionen</title>
  <titleabbrev>MySQL</titleabbrev>
  <partintro>
   <para id="mysql.intro">
    Diese Funktionen erlauben den Zugriff auf einen MySQL Datenbank-Server.
    Weitere Information zu MySQL sind unter <ulink
     url="&url.mysql;">&url.mysql;</ulink> erhältlich. 
   </para>
   <para>
    Die Dokumentation zu MySQL ist unter <ulink
     url="&url.mysql.docs">&url.mysql.docs;</ulink> zu finden.
   </para>
   <section id="mysql.installation">
    <title>Installation</title>
    <para>
     Um diese Funktionen nutzen zu können, müssen Sie PHP mit MySQL
     Unterstützung übersetzen.
     Dies erreichen Sie durch die Angabe der
     Option <option role="configure">--with-mysql</option> beim 
     Übersetzen. Falls Sie den Pfad zu MySQL nicht angeben, verwendet PHP die
     internen MySQL Client Bibliotheken. Benutzer die MySQL auch in 
     anderen Anwendungen nutzen (zum Beispiel: PHP3 und PHP4 als simultane
     Apache-Module oder auth-mysql) sollten immer den Pfad zu MySQL mit der
     Option <option role="configure">-- with-mysql=/pfad/zu/mysql</option>
     festlegen. Diese Angabe zwingt PHP die Client-Bibliotheken
     zu nutzen, die von MySQL installiert wurden. Diese Vorgehensweise
     vermeidet jegliche Konflikte.
    </para>
   </section>
   <section id="mysql.configuration">
    <title>Konfiguration</title>
    <para>
     Das Verhalten der MySQL Funktionen wird durch Einträge in der globalen 
     <link linkend="configuration">Konfigurationsdatei</link> beeinflusst.
     <table>
      <title>MySQL Konfigurations-Optionen</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>Name</entry>
         <entry>Standard</entry>
         <entry>Veränderbar</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>mysql.allow_persistent</entry>
         <entry>"On"</entry>
         <entry>PHP_INI_SYSTEM</entry>
        </row>
        <row>
         <entry>mysql.max_persistent</entry>
         <entry>"-1"</entry>
         <entry>PHP_INI_SYSTEM</entry>
        </row>
        <row>
         <entry>mysql.max_links</entry>
         <entry>"-1"</entry>
         <entry>PHP_INI_SYSTEM</entry>
        </row>
        <row>
         <entry>mysql.default_port</entry>
         <entry>NULL</entry>
         <entry>PHP_INI_ALL</entry>
        </row>
        <row>
         <entry>mysql.default_socket</entry>
         <entry>NULL</entry>
         <entry>PHP_INI_ALL</entry>
        </row>
        <row>
         <entry>mysql.default_host</entry>
         <entry>NULL</entry>
         <entry>PHP_INI_ALL</entry>
        </row>
        <row>
         <entry>mysql.default_user</entry>
         <entry>NULL</entry>
         <entry>PHP_INI_ALL</entry>
        </row>
       </tbody>
      </tgroup>
     </table>
     Weitere Details und die Definition der PHP_INI_* Konstanten sind unter
     <function>ini_set</function> zu finden.
    </para>
    <para>
     Beschreibung der Konfigurations-Optionen
     <variablelist>
      <varlistentry id="ini.mysql.allow-persistent">
       <term>
        <parameter>mysql.allow_persistent</parameter>
        <type>boolean</type>
       </term>
       <listitem>
        <para>
         gibt an, ob
         <link linkend="features.persistent-connections">persistente
          Verbindungen</link> zu MySQL gestattet werden sollen.
        </para>
       </listitem>
      </varlistentry>
      
      <varlistentry id="ini.mysql.max-persistent">
       <term>
        <parameter>mysql.max_persistent</parameter>
        <type>integer</type>
       </term>
       <listitem>
        <para>
         Spezifiziert die maximale Anzahl von persistenten MySQL Verbindungen
         pro Prozess. 
        </para>
       </listitem>
      </varlistentry>
      
      <varlistentry id="ini.mysql.max-links">
       <term>
        <parameter>mysql.max_links</parameter>
        <type>integer</type>
       </term>
       <listitem>
        <para>
         Legt die maximale Anzahl von MySQL Verbindungen (incl. persistenter
         Verbindungen) pro Prozess fest.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry id="ini.mysql.default-port">
       <term>
        <parameter>mysql.default_port</parameter>
        <type>string</type>
       </term>
       <listitem>
        <para>
         Gibt die Portnummer an, über den die Verbindung zum MySQL-Server
         aufgebaut werden soll, wenn kein Port als Verbindungsparameter
         übergeben wurde.
         Wird die Portnummer nicht spezifiziert, wird der Port über die 
         <literal>MYSQL_TCP_PORT</literal> Umgebungsvariable, dem
         <literal>mysqltcp</literal> Eintrag aus der Datei
         <filename>/etc/services</filename> oder der Konstanten
         <literal>MYSQL_PORT</literal> festgelegt.
         Windows 32-bit Systeme können nur <literal>MYSQL_PORT</literal>
         verwenden.
        </para>
       </listitem>
      </varlistentry>
      
      <varlistentry id="ini.mysql.default-socket">
       <term>
        <parameter>mysql.default_socket</parameter>
        <type>string</type>
       </term>
       <listitem>
        <para>
         Spezifiziert den Socketnamen der bei der Verbindung zu einem lokalen
         Datenbankserver bennutzt werden soll, wenn kein Name angegeben wurde.
        </para>
       </listitem>
      </varlistentry>

      <varlistentry id="ini.mysql.default-host">
       <term>
        <parameter>mysql.default_host</parameter>
        <type>string</type>
       </term>
       <listitem>
        <para>
         Spezifiziert den Datenbankserver, zu dem eine Verbindung aufgebaut
         werden soll, wenn kein Server angegeben wurde. Diese Option
         steht nicht im <link linkend="ini.safe-mode">safe mode</link> zur
         Verfügung. 
        </para>
       </listitem>
      </varlistentry>
      
      <varlistentry id="ini.mysql.default-user">
       <term>
        <parameter>mysql.default_user</parameter>
        <type>string</type>
       </term>
       <listitem>
        <para>
         Spezifiziert den Benutzernamen, der bei einer Verbindung zu einer
         Datenbank verwendet werden soll, wenn kein Benutzer angegeben wurde.
         Diese Option steht nicht im <link linkend="ini.safe-mode">safe
          mode</link> zur Verfügung.
        </para>
       </listitem>
      </varlistentry>
      
      <varlistentry id="ini.mysql.default-password">
       <term>
        <parameter>mysql.default_password</parameter>
        <type>string</type>
       </term>
       <listitem>
        <para>
         Spezifiziert das Passwort, das bei einer Verbindung zu einer Datenbank
         verwendet werden soll, wenn kein Passwort angegeben wurde.
         Diese Option steht nicht im <link linkend="ini.safe-mode">safe
          mode</link> zur Verfügung.
        </para>
       </listitem>
      </varlistentry>
      
     </variablelist>
    </para>
   </section>

   <section id="mysql.constants">
    <title>Konstanten</title>
    <para>
     Die Funktion <function>mysql_fetch_array</function> verwendet eine
     Konstante für die verschiedenen Arten der Rückgabe:
     <table>
      <title>MySQL fetch Konstanten</title>
      <tgroup cols="2">
       <thead>
        <row>
         <entry>Konstante</entry>
         <entry>Bedeutung</entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>MYSQL_ASSOC</entry>
         <entry>
          Spalten werden in einem assioziativen Array zurückgegeben.
         </entry>
        </row>
        <row>
         <entry>MYSQL_BOTH</entry>
         <entry>
          Spalten werden sowohl als assioziatives als auch als numerisches
          Array zurückgegeben.
         </entry>
        </row>
        <row>
         <entry>MYSQL_NUM</entry>
         <entry>
          Spalten werden als numerisches Array zurückgegeben.
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </para>
   </section>
   <section>
    <title>Begriffserläuterung</title>
    <para>
     In diesem Dokument wird eine Reihe von Begriffen benutzt, die
     hier kurz erläutert werden sollen.

     <variablelist>
      <varlistentry><term>Anfrageergebnis, Ergebnis</term> 
       <listitem>
        <para>
         Die Rückgabe auf eine Anfrage an den Datenbankserver. Anfragen
         können sowohl Datenbankanfragen sein, die Teile des
         Datenbankinhalts umfassen oder Informationen über eine
         Datenbank oder den Datenbankserver liefern. Ist das Ergebnis
         eine Datenbankanfrage kann man es sich als Tabelle vorstellen,
         in der die Zeilen die Datensätze sind und die Felder den
         Spalten ensprechen. Ein Ergebnis besteht aus 0 oder beliebig
         vielen Datensätzen.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry><term>Ergebnis-Kennung</term>
       <listitem>
        <para>
         Eine Referenz auf ein Ergebnis. Über diese Kennung erfolgt
         grundsätzlich der Zugriff auf das Ergebnis.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry><term>Datensatz</term>
       <listitem>
        <para>
         Eine Zeile aus einem Anfrageergebnis bestehend aus den Werten
         der einzelnen Felder.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry><term>Datensatzzeiger</term>
       <listitem>
        <para>
         Ein interner Zeiger auf einen Datensatz in einem
         Anfrageergebnis. Dieser Zeiger bestimmt auf welchen Datensatz
         zugegriffen wird. Der Zeiger kann sowohl implizit als auch
         explizit verändert werden.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry><term>Feld</term>
       <listitem>
        <para>
         Entspricht einer Spalte im Anfrageergebnis.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry><term>Feldzeiger</term>
       <listitem>
        <para>
         Wie Datensatzzeiger bei Zugriffen auf Felder eines
         Anfrageergebnisses.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry><term>Verbindungs-Kennung</term>
       <listitem>
        <para>
         Eine Referenz auf eine Verbindung zum Datenbank-Server. Mit
         dieser Verbindung ist beispielsweise die Datenbank, der
         Benutzer, der Rechnername auf dem die Datenbank läuft und
         weiteres verknüpft. Jeder Zugriff auf den Server nutzt diese
         Kennung. Wenn die Kennung beim Aufruf einer Funktion nicht
         angegeben wird, so wird die aktuelle Verbindungs-Kennung
         verwendet, die intern von PHP verwaltet wird.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </para>
   </section>
   <section id="mysql.examples">
    <title>Beispiele</title>
    <para>
     Folgendes einfache Beispiel zeigt Ihnen, wie Sie sich mit einer MySQL-
     Datenbank verbinden, eine Anfrage ausführen, die Ergebnisse ausgeben
     und die Verbindung wieder trennen.
     <example>
      <title>MySQL Erweiterung: ein Überblicks Beispiel</title>
      <programlisting role="php">
<![CDATA[
       <?php
       // Verbindung aufbauen, auswählen einer Datenbank
       $link = mysql_connect("mysql_host", "mysql_login", "mysql_password")
       or die("Keine Verbindung möglich!");
       print "Verbindung zum Datenbankserver erfolgreich";
       mysql_select_db("Meine_Datenbank")
       or die("Auswahl der Datenbank fehlgeschlagen");

       // ausführen einer SQL Anfrage
       $query = "SELECT * FROM Meine_Tabelle";
       $result = mysql_query($query)
       or die("Anfrage fehlgeschlagen");

       // Ausgabe der Ergebnisse in HTML
       print "<table>\n";
       while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
       print "\t<tr>\n";
       foreach ($line as $col_value) {
       print "\t\t<td>$col_value</td>\n";
       }
       print "\t</tr>\n";
       }
       print "</table>\n";

       // Freigeben des Resultsets
       mysql_free_result($result);

       // schliessen der Verbinung
       mysql_close($link);
       ?>
       ]]>
      </programlisting>
     </example>
    </para>
   </section>
  </partintro>

&reference.mysql.functions;

 </reference>
        
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

