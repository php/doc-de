<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.6 $ -->
<!-- EN-Revision: 1.5 Maintainer: conni Status: ready -->
  <refentry xml:id="function.shmop-open" xmlns="http://docbook.org/ns/docbook">
   <refnamediv>
    <refname>shmop_open</refname>
    <refpurpose>Erstellt oder öffnet einen gemeinsamen Speicherblock</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
     <methodsynopsis>
      <type>int</type><methodname>shmop_open</methodname>
      <methodparam><type>int</type><parameter>key</parameter></methodparam>
      <methodparam><type>string</type><parameter>flags</parameter></methodparam>
      <methodparam><type>int</type><parameter>mode</parameter></methodparam>
      <methodparam><type>int</type><parameter>size</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>shmop_open</function> Kann einen gemeinsamen Speicherbereich erstellen oder öffnen.
    </para>
    <para>
     <function>shmop_open</function> benötigt 4 Parameter: key, die
     System-ID des gemeinsam genutzten Speicherblocks, dieser Parameter
     kann als Dezimal- oder Hexadezimalzahl übergeben werden. Der
     zweite Parameter bezeichnet die Flags, die man benutzen kann:
     <itemizedlist>
      <listitem>
       <simpara>
        "a" zum Zugriff (access) auf einen gemeinsamen Speicherblock (setzt SHM_RDONLY für shmat).
        Benutzen Sie dieses Flag, wenn Sie einen bestehenden gemeinsamen Speicherblock zum Lesen öffnen wollen.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        "c" zum Erstellen (create) eines gemeinsamen Speicherblocks
	     (setzt IPC_CREATE). Benutzen Sie dieses Flag, wenn Sie einen
	     neuen gemeinsamen Speicherblock erstellen wollen oder, falls
	     bereits ein Segment mit derselben ID existiert, zum Öffnen
	     dieses Segments für Lese- und Schreibzugriffe. 
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        "w" für Lese- und Schreibzugriffe. Benutzen Sie dieses Flag
	wenn Sie in einen gemeinsamen Speicherbereich schreiben oder
	daraus lesen müssen. Das wird meistens der Fall sein.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        "n" zum Erzeugen eines neuen gemeinsamen Speichersegments
	    (setzt IPC_CREATE|IPC_EXCL). Benutzen Sie dieses Flag, wenn
	    Sie ein neues gemeinsames Speichersegment erzeugen wollen.
	    Falls schon ein Segment mit diesem Flag existiert, schlägt
	    die Funktion fehl. Dies ist aus Sicherheitsgründen nützlich, 
	    denn damit können Sie Sicherheitslöcher vermeiden.	
       </simpara>
      </listitem>
     </itemizedlist>
     Der dritte Parameter ist der Modus, der die Zugriffsrechte, die
     Sie dem gemeinsamen Speicher zuweisen wollen, angibt. Das sind
     dieselben Zugriffsrechte wie für Dateien. Zugriffsrechte müssen
     oktal angegeben werden, z.B. 0644. Der letzte Parameter gibt die
     Grösse des	gemeinsamen Speichers, den Sie erstellen wollen, in
     Byte, an.
     <note><simpara>
      Beachten Sie: Der dritte und vierte Parameter muss als 0
      angegeben	werden, wenn Sie ein existierendes gemeinsames
      Speichersegment öffnen wollen. Bei Erfolg liefert die Funktion
      <function>shmop_open</function> eine ID zurück, die Sie zum
      Zugriff auf den erstellten gemeinsamen Speicher benutzen können.
     </simpara></note>
    </para>
    <para>
     <example>
      <title>Einen neuen gemeinsamen Speicherblock erstellen</title>
      <programlisting role="php">
<![CDATA[
<?php
$shm_key = ftok(__FILE__, 't');
$shm_id = shmop_open($shm_key, "c", 0644, 100);
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     In diesem Beispiel wurde ein gemeinsamer Speicherblock mit der
     System-ID 0x0fff erstellt.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
