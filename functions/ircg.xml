<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.3 $ -->
 <reference id="ref.ircg">
  <title>IRC Gateway Functions</title>
  <titleabbrev>IRC Gateway</titleabbrev>
  <partintro>
	 <para>
		Internet Relay Chat Gateway ...
	 </para>
	 <para>
	  Die ircg-Funktionen benötigen die IRCG-Library <ulink url="&url.ircg;">IRCG</ulink> von Sascha Schumann.
	 </para>
  </partintro>

  <refentry id="function.ircg-pconnect">
   <refnamediv>
    <refname>ircg_pconnect</refname>
    <refpurpose>
	   Verbindung zum IRC-Server aufbauen
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>resource <function>ircg_pconnect</function></funcdef>
      <paramdef>string <parameter>username</parameter></paramdef>
      <paramdef>string <parameter><optional>server_ip</optional></parameter></paramdef>
      <paramdef>int    <parameter><optional>server_port</optional></parameter></paramdef>
      <paramdef>string <parameter><optional>msg_format</optional></parameter></paramdef>
      <paramdef>array  <parameter><optional>ctcp_messages</optional></parameter></paramdef>
      <paramdef>array  <parameter><optional>user_settings</optional></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   <function>ircg_pconnect</function>
          
        Stellt eine Verbindung zum einem IRC Server her, und liefert eine Verbindunskennung.
    </para>
		<para>
		 Der Parameter <parameter>username</parameter> muss angeben werden, er legt den Benutzernamen auf dem Server fest.
		 <parameter>server_ip</parameter> und <parameter>server_port</parameter> sind optional. Werden diese nicht angegben wird für <parameter>server_ip</parameter> der Wert 127.0.0.1 (localhost) und für <parameter>server_port</parameter> der Wert 6667 gesetzt.
		 <note>
			<para>
			 Der Parameter <parameter>server_ip</parameter> muss aus einer IP-Adresse in numerischer Form bestehen. 
			</para>
		 </note>
		</para>
		<para>
		 Die Ausgabe der IRC Meldungen und Ereignisse wird mit einem formatierten String, der vor dem Aufruf mit der Funktion <function>ircg_register_format_messages</function> im Parameter <parameter>msg_format</parameter> definiert.
		</para>
		<para>
		 <parameter>ctcp_messages</parameter>
		</para>
		<para>
		 <parameter>user_settings</parameter>
		</para>
    <para>
     Siehe auch: <function>ircg_disconnect</function>,
		 <function>ircg_is_conn_alive</function>,
		 <function>ircg_register_format_messages</function>.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.ircg-fetch-error-msg">
   <refnamediv>
    <refname>ircg_fetch_error_msg</refname>
    <refpurpose>
	   Liefert den Fehler des letzten ircg Funktionsaufrufes.
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>ircg_fetch_error_msg</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   <function>ircg_fetch_error_msg</function> 
       Liefet den Fehler der Verbindung <parameter>connection</parameter> der letzten aufgerufenen ircg Funktion zurück.
    </para>
	<note>
		<para>
		 Die Fehlernummer wird im ersten Element des Arrays zurückgeliefert, der Fehlertext im zweiten Parameter.
		</para>
	</note>
    <para>
     <example>
       <title><function>ircg_fetch_error_msg</function> Beispiel</title>
       <programlisting role="php">
if (!ircg_join ($id, "#php")){
    $error = ircg_fetch_error_msg($id);
    print ("Can't join channel #php. Errorcode: $error[0] Description: $error[1]");
}
       </programlisting>
      </example>
     </para> 
   </refsect1>
  </refentry>
  <refentry id="function.ircg-set-current">
   <refnamediv>
    <refname>ircg_set_current</refname>
    <refpurpose>
	   Setzt die Verbindung für die Ausgabe der IRC-Server Meldungen
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_set_current</function></funcdef>
      <paramdef>resource
			 <parameter>connection</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   Setzt die Verbindung für die Ausgabe. Alle Meldungen des verbundenen IRC-Servers, der über den Parameter <parameter>connection</parameter> spezifiziert wurde, werden über die in der Funktion <function>ircg_register_format_messages</function> angegebenen Formatierungen ausgegeben.
    </para>
    <para>
     Siehe auch: <function>ircg_register_format_messages</function> and
		 <function>ircg_lookup_format_messages</function>.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-join">
   <refnamediv>
    <refname>ircg_join</refname>
    <refpurpose>
	   Einen Channel auf dem verbundenen IRC-Server betreten
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_join</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter>channel</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   Betritt den Channel <parameter>channel</parameter> auf dem IRC-Server <parameter>connection</parameter>.
    </para>
    <para>
     Siehe auch: 
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-part">
   <refnamediv>
    <refname>ircg_part</refname>
    <refpurpose>
	   Einen Channel auf dem IRC-Server verlassen
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_part</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter>channel</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   Verlässt den Channel <parameter>channel</parameter> auf dem IRC-Server <parameter>connection</parameter>.
    </para>
    <para>
     Siehe auch: 
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-msg">
   <refnamediv>
    <refname>ircg_msg</refname>
    <refpurpose>
	   Sendet eine Nachricht an einen Channel oder Benutzer
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_msg</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter>recipient</parameter></paramdef>
	    <paramdef>string   <parameter>message</parameter></paramdef>
	    <paramdef>boolean  <parameter><optional>suppress</optional></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   <function>ircg_msg</function> sendet eine Nachricht an einen Channel oder Benutzer auf dem IRC-Server <parameter>connection</parameter>. Der Parameter <parameter>recipient</parameter>, beginnend mit einem <literal>#</literal> oder <literal>&amp;</literal> sendet die Nachricht an einen Channel, andere Angaben werden als Benutzername interpretiert.
    </para>
    <para>
		 Wird der optionale Parameter <parameter>suppress</parameter> auf &true; gesetzt, wird die Ausgabe der Nachricht auf der eigenen Verbindung unterbunden.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-notice">
   <refnamediv>
    <refname>ircg_notice</refname>
    <refpurpose>
	   Sendet eine Notiz zu einem anderen Benutzer 
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_notice</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter></parameter></paramdef>
	    <paramdef>string   <parameter>message</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	  Sendet eine Nachricht <parameter>message</parameter> zum angegebenen
		 Benutzer <parameter>nick</parameter> auf dem verbunden IRC-Server
		 <parameter>connection</parameter>. Der genaue Unterschied
		 zwischen einer Nachricht und einer Notiz ist dem IRC-Manual zu entnehmen.
    </para>
    <para>
     Siehe auch: 
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-nick">
   <refnamediv>
    <refname>ircg_nick</refname>
    <refpurpose>
	   ändert den Benutzernamen auf dem IRC-Server
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_nick</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter>nick</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   Ändert den Benutzernamen auf dem IRC-Server <parameter>connection</parameter> auf den neuen Benutzernamen <parameter>nick</parameter>.
    </para>
    <para>
		 liefert bei erfolgreicher Änderung &true; oder &false; falls der name nicht geändert werden konnte.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-topic">
   <refnamediv>
    <refname>ircg_topic</refname>
    <refpurpose>
	   Setzt das Thema für einen Channel
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_topic</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter>channel</parameter></paramdef>
	    <paramdef>string   <parameter>new_topic</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   Ändert das Thema (Topic) für den Channel <parameter>channel</parameter> des
		  verbundenen IRC-Servers <parameter>connection</parameter> in
		 <parameter>new_topic</parameter>.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-channel_mode">
   <refnamediv>
    <refname>ircg_channel_mode</refname>
    <refpurpose>
	   Setzt die Channel Attribute für einen Benutzer
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_channel_mode</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter>channel</parameter></paramdef>
	    <paramdef>string   <parameter>mode_spec</parameter></paramdef>
	    <paramdef>string   <parameter>nick</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   Setzt die Attribute <parameter>mode_spec</parameter> in einem  Channel <parameter>channel</parameter>
           auf dem verbundenen Server <parameter>connection</parameter> für den Benutzer <parameter>nick</parameter>.
    </para>
		<para>
		 Die Attribute werden gesetzt oder gelöscht durch Angabe eines Zeichen verbunden mit einem Plus oder Minuszeichen. Ein Operator-Attribut beispielsweise wird mittels '+o' gesetzt oder durch '-o' entfernt.
		</para> 
    <para>
     Siehe auch: 
    </para>
   </refsect1>
  </refentry>

 <refentry id="function.ircg-html-encode">
   <refnamediv>
    <refname>ircg_html_encode</refname>
    <refpurpose>
     Wandelt einen HTML string für die Ausgabe um
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_html_encode</function></funcdef>
      <paramdef>string   <parameter>html_string</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
         Wandelt den HTML-String <parameter>html_string</parameter> für die Ausgabe um. Dies ist beispielsweise sinnvoll, wenn in einem Channel über HTML oder Beispiele diskutiert wird.   
    </para>
    <para>
     Siehe auch: <!-- what --> 
    </para>
   </refsect1>
  </refentry>

 <refentry id="function.ircg-whois">
   <refnamediv>
    <refname>ircg_whois</refname>
    <refpurpose>
	   Liefert die Information über einen bestimmten Benutzer
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_whois</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string   <parameter>nick</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
    Weist den verbunden IRC-Server <parameter>connection</parameter> an, Informationen über den Benutzer <parameter>nick</parameter> anzuzeigen.	   
    </para>
    <para>
     Siehe auch: 
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-kick">
   <refnamediv>
    <refname>ircg_kick</refname>
    <refpurpose>
	  Entfernt einen Benutzer aus einem Channel
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_kick</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string <parameter>channel</parameter></paramdef>
	    <paramdef>string <parameter>nick</parameter></paramdef>
	    <paramdef>string <parameter>reason</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
           Entfernt den Benutzer <parameter>nick</parameter> vom Channel <parameter>channel</parameter> auf dem verbundenen IRC-Server <parameter>connection</parameter>. <parameter>reason</parameter> gibt den Grund an, warum der User aus dem Channel geworfen wird.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-ignore-add">
   <refnamediv>
    <refname>ircg_ignore_add</refname>
    <refpurpose>
	   Fügt einen Benutzer an die Liste der zu ignorierenden Personen an.
</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_ignore_add</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string <parameter>nick</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
        Die Function fügt den Benutzer <parameter>nick</parameter> zur persönlichen Liste der ignorierten Benutzer auf dem verbundenen IRC-Server <parameter>connection</parameter> hinzu. Dadurch werden von diesem Benutzer keine Nachrichten mehr angezeigt.
    </para>
    <para>
     Siehe auch: <function>ircg_ignore_del</function> .
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-ignore-del">
   <refnamediv>
    <refname>ircg_ignore_del</refname>
    <refpurpose>
	   Entfernt einen Benutzer von der Liste ignorierter Personen
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_ignore_del</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string <parameter>nick</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
		 Diese Funktion entfernt den Benutzer <parameter>nick</parameter> von der Liste der ignorierten Personen auf dem verbunden IRC-Server 
			<parameter>connection</parameter>. 
    </para>
    <para>
     Siehe auch: <function>ircg_ignore_add</function>.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-disconnect">
   <refnamediv>
    <refname>ircg_disconnect</refname>
    <refpurpose>
	   Beendet die Verbindung zum IRC-Server
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_disconnect</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
	    <paramdef>string <parameter>reason</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   <function>ircg_disconnect</function> beendet die Verbindung
		 <parameter>connection</parameter> zu einem IRC-Server, die mittels der Funktion <function>ircg-pconnect</function> hergestellt wurde
    </para>
    <para>
     Siehe auch: <function>ircg_pconnect</function>.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-is-conn-alive">
   <refnamediv>
    <refname>ircg_is_conn_alive</refname>
    <refpurpose>
	   Check connection status
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_is_conn_alive</function></funcdef>
      <paramdef>resource <parameter>connection</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
	   <function>ircg_is_conn_alive</function> gibt den Wert &true; zurück,
wenn die Verbindung  <parameter>connection</parameter> zum IRC-Server besteht, oder &false; falls keine gültige Verbindung mehr besteht. 
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-lookup-format-messages">
   <refnamediv>
    <refname>ircg_lookup_format_messages</refname>
    <refpurpose>
	   Wählt ein Format für die Ausgabe von IRC-Nachrichten und Ereignissen aus.
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_lookup_format_messages</function></funcdef>
      <paramdef>string <parameter>name</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
        Wählt ein über die Funktion <function>ircg_register_format</function> definiertes Format <parameter>string</parameter> zur Formatierung der Ausgabe von IRC-Server Nachrichten und Ereignissen aus. Unter dem Namen <literal>ircg</literal> steht ein Standardformat zur Verfügung.
    </para>
    <para>
     Siehe auch: <function>ircg_register_format_messages</function>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.ircg-register-format-messages">
   <refnamediv>
    <refname>ircg_register_format_messages</refname>
    <refpurpose>
	   Registriert die Ausgabeformatierungen für Nachrichten und Ereignisse
	   vom IRC-Server
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>ircg_register_format_messages</function></funcdef>
      <paramdef>string <parameter>name</parameter></paramdef>
      <paramdef>array  <parameter>messages</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
           Mit der Funktion <function>ircg_register_format_messages</function>
	   kann die Formatierung der Ausgabe von IRC-Servermeldungen und
	   -ereignissen festgelegt werden. Dabei ist es möglich mehrere 
	   Formate (Layer) zu definieren, die mit der Funktion
	   <function>ircg_lookup_format_messages</function> ausgewählt werden
	   können.
    </para>
		<para>
		 Die Funktionen für die Ausgabe werden in dem Array
		 <parameter>messages</parameter> in folgender Reihenfolge
		 übergeben:
		 <itemizedlist>
			<listitem><simpara>Nachricht an den Channel</simpara></listitem>
			<listitem><simpara>Erhalten einer privaten Nachricht</simpara></listitem>
			<listitem><simpara>Private Nachricht gesendet</simpara></listitem>
			<listitem><simpara>Ein Benutzer verlässt den Channel</simpara></listitem>
			<listitem><simpara>Ein Benutzer betritt den Channel</simpara></listitem>
			<listitem><simpara>Ein Benutzer wurde aus dem Channel geworfen (gekicked)</simpara></listitem>
			<listitem><simpara>Thema (Topic) des Channels hat sich geändert</simpara></listitem>
			<listitem><simpara>Fehler</simpara></listitem>
			<listitem><simpara>schwerer Fehler</simpara></listitem>
			<listitem><simpara>Ende der Benutzerliste (wird beim Betreten eines Channels gesendet)</simpara></listitem>
			<listitem><simpara>Meldung beim eigenen Betreten eines Channels</simpara></listitem>
			<listitem><simpara>Ein Benutzer ändert seinen Namen</simpara></listitem>
			<listitem><simpara>Ein Benutzer beendet die Verbindung zum IRC-Server</simpara></listitem>
			<listitem><simpara>Eine grössere Anzahl von Benutzern betritt den Channel (z.B. Bei netsplit/join)</simpara></listitem>
			<listitem><simpara>Ein Benutzer aus der Liste bei massenhaftem Betreten eines Channels</simpara></listitem>
			<listitem><simpara>Ende des massenhaften Betretens eines Channels</simpara></listitem>
			<listitem><simpara>Benutzerinformation</simpara></listitem>
			<listitem><simpara>Serverinformation</simpara></listitem>
			<listitem><simpara>Information über Inaktivität</simpara></listitem>
			<listitem><simpara>Information über den Channel</simpara></listitem>
			<listitem><simpara>Ende Meldung bei Information über Channel (Listenende)</simpara></listitem>
			<listitem><simpara>Benachrichtigung über Änderung des voice-Attributs</simpara></listitem>
			<listitem><simpara>Benachrichtung über Änderung des Operator-Attributs</simpara></listitem>
			<listitem><simpara>für den Channel gesperrter Benutzer</simpara></listitem>
			<listitem><simpara>Ende der Liste gesperrter Benutzer</simpara></listitem>
		 </itemizedlist>
		 <itemizedlist>
			<listitem><simpara>%f - von</simpara></listitem>
			<listitem><simpara>%t - an</simpara></listitem>
			<listitem><simpara>%c - channel</simpara></listitem>
			<listitem><simpara>%r - vollständige Nachricht</simpara></listitem>
			<listitem><simpara>%m - umgewandelte Nachricht</simpara></listitem>
			<listitem><simpara>%j - für Javascript umgewandelte Nachricht</simpara></listitem>
		 </itemizedlist>
		 <itemizedlist>
			<listitem><simpara>1 - mod encode</simpara></listitem>
			<listitem><simpara>2 - decodierter Benutzername</simpara></listitem>
		 </itemizedlist>
		</para>
    <para>
     Siehe auch: <function>ircg_lookup_format_messages</function>.
    </para>
   </refsect1>
  </refentry>

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
