<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $EN-Revision: 1.60 maintainer: georg  status: ready$ -->
 <reference id="ref.dio">
  <title>Direkte Ein-/Ausgabe Funktionen</title>
  <titleabbrev>Direkte Ein-/Ausgabe Funktionen</titleabbrev>

  <partintro>
   <section id="dio.intro">
    <title>Direkte Ein-/Ausgabe Funktionen</title>
    <para>
      PHP unterstützt die direkte Ein-/Ausgabe-Funktionen, beschrieben
      im Posix Standard (Kapitel 6) für die Ein- und Ausgabe auf einer
      niederen Ebene als die standardmässig verwendeten C-Funktionen
      (fopen, fread,...).
    </para>
   </section>
   <section id="dio.installation">
    <title>Installation</title>
    <para>
     Um die DIO Funktionen benutzen zu können, muss PHP mit der Option
     <option role="configure">--enable-dio</option> konfiguriert werden.
    </para>
   </section>
  </partintro>
 
  <refentry id="function.dio-open">
   <refnamediv>
    <refname>dio_open</refname>
    <refpurpose>öffnet eine Datei mit den angegebenen Rechten</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>resource <function>dio_open</function></funcdef>
			<paramdef>string <parameter>filename</parameter></paramdef>
			<paramdef>int <parameter>flags</parameter></paramdef>
			<paramdef>int
			 <parameter><optional>mode</optional></parameter>
			</paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
      <function>dio_open</function> öffnet eine Datei und liefert
      einen Dateizeiger zurück. Im Fehlerfall liefert
      <function>dio_open</function> -1 zurück.
      Ist der Parameter <parameter>flags</parameter> O_CREAT, 
      so gibt der optionale Parameter <parameter>mode</parameter> die
      Dateirechte an.
      Der Parameter <parameter>flags</parameter> kann eine der
      folgenden Zugriffsmethoden sein:
      <itemizedlist>
        <listitem><para>O_RDONLY - öffnet die Datei für
        Lesezugriff</para></listitem>
        <listitem><para>O_WRONLY - öffnet die Datei für
        Schreibzugriff</para></listitem>
        <listitem><para>O_RDWR - öffnet die Datei für Schreib- und
        Lesezugriff</para></listitem>
      </itemizedlist>
      Diese Zugriffsmethoden können mit folgenden Attributen
      kombiniert werden:
      <itemizedlist>
        <listitem><para>O_CREAT - erzeugt die Datei, falls diese nicht
         existiert.</para></listitem>
        <listitem><para>O_EXCL - in Kombination mit O_CREAT wird ein
         Fehler (-1) zurückgegeben, wenn die Datei bereits existiert.</para></listitem>
        <listitem><para>O_TRUNC - falls die Datei bereits existiert,
         und sie für Schreibzugriff geöffnet wird, wird diese auf die
         Grösse 0 zurückgesetzt.</para></listitem>
        <listitem><para>O_APPEND - setzt den Zeiger für
         Schreiboperationen an das Ende der Datei.
        </para></listitem>
        <listitem><para>O_NONBLOCK - Setzt den Modus auf
         "nonblocking"</para></listitem> 
      </itemizedlist>
    </para>
   </refsect1>
  </refentry>
	
  <refentry id="function.dio-read">
   <refnamediv>
    <refname>dio_read</refname>
    <refpurpose>Liest n Bytes und gibt sie zurück, ist n nicht
    angegeben wird ein 1K Block gelesen.</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>dio_read</function></funcdef>
			<paramdef>resource <parameter>fd</parameter></paramdef>
			<paramdef>int
			 <parameter><optional>n</optional></parameter>
			</paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Die Funktion <function>dio_read</function> liest
     <parameter>n</parameter> Bytes aus der Datei
     <parameter>fd</parameter> und gibt diese zurück. Wird der
     optionale Parameter <parameter>n</parameter> nicht angegeben,
     wird standardmässig ein 1K Block gelesen und zurückgegeben.
    </para>
   </refsect1>
  </refentry>
	
  <refentry id="function.dio-write">
   <refnamediv>
    <refname>dio_write</refname>
    <refpurpose>Schreibt Daten in eine Datei</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>dio_write</function></funcdef>
			<paramdef>resource <parameter>fd</parameter></paramdef>
			<paramdef>string <parameter>data</parameter></paramdef>
			<paramdef>int
			 <parameter><optional>len</optional></parameter>
     </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Die Funktion <function>dio_write</function> schreibt bis zu
     <parameter>len</parameter> Bytes an Daten
     <parameter>data</parameter> in die Datei
     <parameter>fd</parameter>.
     Wird der optionale Parameter <parameter>len</parameter> nicht
     angegeben, so werden alle Daten <parameter>data</parameter> in
     die Datei geschrieben.
     <function>dio_write</function> liefert die Anzahl der Bytes
     zurück, die in die Datei geschrieben wurden.
    </para>
   </refsect1>
  </refentry>
	
  <refentry id="function.dio-truncate">
   <refnamediv>
    <refname>dio_truncate</refname>
    <refpurpose>Schneidet eine Datei ab</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>bool <function>dio_truncate</function></funcdef>
			<paramdef>resource <parameter>fd</parameter></paramdef>
			<paramdef>int <parameter>offset</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Die Funktion <function>dio_truncate</function> schneidet die
     Datei <parameter>fd</parameter> nach
     <parameter>offset</parameter> ab.
     War die Datei ursprünglich grösser, so gehen die Daten
     verloren. War sie kleiner so wird sie mit Nullen aufgefüllt.
    </para>
   </refsect1>
  </refentry>
	
  <refentry id="function.dio-stat">
   <refnamediv>
    <refname>dio_stat</refname>
    <refpurpose>Liefert Statusinformationen über eine Datei </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>dio_stat</function></funcdef>
			<paramdef>resource <parameter>fd</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
      Die Funktion <function>fstat</function> gibts ein assoziatives
      Array zurück, welches Informationen über die Datei
      <parameter>fd</parameter> enthält.
      Das Array enthält folgende Einträge:
      <itemizedlist>
        <listitem><para>"device" - Device</para></listitem>
        <listitem><para>"inode" - Inode</para></listitem>
        <listitem><para>"mode" - Modus</para></listitem>
        <listitem><para>"nlink" - Anzahl Links</para></listitem>
        <listitem><para>"uid" - Benutzer Id</para></listitem>
        <listitem><para>"gid" - Gruppentyp</para></listitem>
        <listitem><para>"device_type" - Device Typ</para></listitem>
        <listitem><para>"size" - Grösse in Bytes</para></listitem>
        <listitem><para>"blocksize" - Blockgrösse</para></listitem>
        <listitem><para>"blocks" - Anzahl allocierter Blöcke</para></listitem>
        <listitem><para>"atime" - Letzter Zugriff</para></listitem>
        <listitem><para>"mtime" - Letze Modifikation</para></listitem>
        <listitem><para>"ctime" - Letzte Änderung</para></listitem>
      </itemizedlist>
      Im Fehlerfall liefert <function>dio_stat</function> NULL zurück.
    </para>
   </refsect1>
  </refentry>
	
  <refentry id="function.dio-seek">
   <refnamediv>
    <refname>dio_seek</refname>
    <refpurpose>Setzt den Dateizeiger</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>dio_seek</function></funcdef>
			<paramdef>resource <parameter>fd</parameter></paramdef>
			<paramdef>int <parameter>pos</parameter></paramdef>
			<paramdef>int <parameter>whence</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Die Funktion <function>dio_seek</function> setzt den Dateizeiger
     der Datei <parameter>fd</parameter>.
     Der <parameter>whence</parameter> gibt dabei an, wie die Position
     <parameter>pos</parameter> interpretiert werden soll:
     <itemizedlist>
       <listitem><para>SEEK_SET - gibt an, dass 
       <parameter>pos</parameter> die Position vom Anfang der Datei
       ist</para></listitem>
       <listitem><para>SEEK_CUR - gibt an, dass 
       <parameter>pos</parameter> die Position relativ von der
       momentanen Dateizeigerposition ist.</para></listitem>
       <listitem><para>SEEK_END - gibt an, dass 
       <parameter>pos</parameter> die Position relativ zum Dateiende
       ist. Eine negative Zahl setzt den Dateizeiger innerhalb der
       Datei, ein positvier Wert bewirkt, dass die Datei vom Ende bis
       zur neuen Position mit Nullen aufgefüllt wird.</para></listitem> 
     </itemizedlist>
    </para>
   </refsect1>
  </refentry>
	
  <refentry id="function.dio-fcntl">
   <refnamediv>
    <refname>dio_fcntl</refname>
    <refpurpose>Ändert den Dateideskriptor</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>mixed <function>dio_fcntl</function></funcdef>
			<paramdef>resource <parameter>fd</parameter></paramdef>
			<paramdef>int <parameter>cmd</parameter></paramdef>
			<paramdef>mixed
			 <parameter><optional>arg</optional></parameter>
			</paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Die Funktion <function>dio_fcntl</function> führt eine Aktion
     <parameter>cmd</parameter> an der Datei
     <parameter>fd</parameter> aus.
     Einige Aktionen <parameter>cmd</parameter> benötigen das
     zusätzliche Argument <parameter>args</parameter>.
    </para>
    <para>
    <parameter>arg</parameter> ist ein assoziatives Array, wenn
    <parameter>cmd</parameter> F_SETLK oder F_SETLLW ist. Es hat
    folgende Einträge:
     <itemizedlist>
      <listitem><para>"start" - offset an dem der Lock
      beginnt</para></listitem> 
      <listitem><para>"length" - Länge des gelockten
      Bereichs</para></listitem>
      <listitem><para>"wenth" - Relative Position von start. Kann
      folgende Werte annehmen: SEEK_SET, SEEK_END and
      SEEK_CUR</para></listitem> 
      <listitem><para>"type" - Locktyp: F_RDLCK (read
      lock), F_WRLCK (write lock) oderr F_UNLCK (unlock)</para></listitem>
     </itemizedlist>
    </para>
    <para>
     <parameter>cmd</parameter> ist einer der folgenden Konstanten:
      <itemizedlist>
        <listitem><para>F_SETLK - Setzt oder löscht einen Lock. Ist
        der Bereich bereits von einem anderen Prozess gelockt, so
        liefert die Funktion <function>dio_fcntl</function> 
        -1 zurück.</para></listitem>
        <listitem><para>F_SETLKW - wie F_SETLK, jedoch im Falle, dass
        der Bereich von einem anderen Prozess gelockt wird, wartet
        <function>dio_fcntl</function> auf die Freigabe des Locks. 
        </para></listitem>
        <listitem><para>F_GETLK - <function>dio_fcntl</function>
        liefert ein assioziatives Array zurück (Beschreibung siehe
        oben), falls ein anderer Prozess den Bereich gelockt hat.
        </para></listitem>
      </itemizedlist>
   </para>
    <para>

    </para>
   </refsect1>
  </refentry>
	
  <refentry id="function.dio-close">
   <refnamediv>
    <refname>dio_close</refname>
    <refpurpose>Schliesst die Datei</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>void <function>dio_close</function></funcdef>
			<paramdef>resource <parameter>fd</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Die Funktion <function>dio_close</function> schliesst die
     Datei <parameter>fd</parameter>.
    </para>
   </refsect1>
  </refentry>
	
 </reference>
 
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

