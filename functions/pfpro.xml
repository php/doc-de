<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.8 $ -->
<!-- EN-Revision: 1.9 Maintainer: nohn Status: ready -->
 <reference id="ref.pfpro">
  <title>Verisign Payflow Pro Funktionen</title>
  <titleabbrev>Verisign Payflow Pro</titleabbrev>
  <partintro>
   <simpara>
    Diese Erweiterung macht es möglich, Geschäftsabwicklungen via Kreditkarte
    und andere Finanztransaktionen über die Verisign Payment Services, auch
    als Signio bekannt, abzuwickeln
    (<ulink url="&url.pfpro;">&url.pfpro;</ulink>).
   </simpara>
   <simpara>
    Diese Funktionen sind nur verfügbar, wenn PHP mit der Option
    <option role="configure">--with-pfpro[=DIR]</option> compiliert wurde.
    Dazu ist das SDK nötig, dass im <ulink url="&url.pfpro.download;">
    Management-Interface</ulink> heruntergeladen werden kann, sobald man sich
    registriert hat. Sollte diese Erweiterung in einem SSL-Webserver oder
    zusammen mit anderen SSL-Komponenten verwendet werden, muss die
    Beta-Version des SDK verwendet werden.
   </simpara>
   <simpara>
    Sobald das SDK heruntergeladen wurde, sollte man die Dateien aus dem
    <filename class="directory">lib</filename>-Verzeichnis der Distribution
    kopieren. Die Header-Datei <filename>pfpro.h</filename> sollte in das
    Verzeichnis <filename class="directory">/usr/local/include</filename>,
    die Bibliothek <filename>libpfpro.so</filename> in das Verzeichnis
    <filename class="directory">/usr/local/lib</filename> kopiert werden.
   </simpara>
   <simpara>
    Wenn diese Funktionen genutzt werden, ist es mögliche, auf Aufrufe von
    <function>pfpro_init</function> und <function>pfpro_cleanup</function>
    zu verzichten, da diese automatisch aufgerufen werden, wenn sie benötigt
    werden. Diese Funktionen sind jedoch nachwievor für Sonderfälle vorhanden,
    z.B. wenn viele Transaktionen auf einmal ausgeführt werden sollen, oder
    genaue Kontrolle über die Biblitohek benötigt wird. Mehrere Transaktionen
    zwischen diesen beiden Funktionen können mittels der
    <function>pfpro_process</function>-Funktion ausgeführt werden.
   </simpara>
   <simpara>
    Diese Funktionen sind seit PHP 4.0.2 verfügbar.
   </simpara>

   <note><para>
    Diese Funktionen stellen nur eine Schnittstelle zu den Verisign Payment
    Services dar. Details über die nötigen Paramter sind in dem Dokument
    Payflow Pro Developers Guide zu finden, welches bei Verisign erhältlich
    ist.
   </para></note>
  </partintro>

  <refentry id="function.pfpro-init">
   <refnamediv>
    <refname>pfpro_init</refname> 
    <refpurpose>Initialisiert die Payflow Pro Bibliothek</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>void <function>pfpro_init</function></funcdef>
      <void/>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>pfpro_init</function> wird benutzt, um die Payflow Pro
     Bibliothek zu initialisieren. Auf einen Aufruf dieser Funktion kann
     verzichtet werden, da <function>pfpro_init</function> automatisch vor
     der ersten Transaktion aufgerufen wird.
    </para>
    <para> 
     See also <function>pfpro_cleanup</function>.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.pfpro-cleanup">
   <refnamediv>
    <refname>pfpro_cleanup</refname> 
    <refpurpose>Schliesst Payflow Pro Bibliothek</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>void <function>pfpro_cleanup</function></funcdef>
      <void/>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>pfpro_cleanup</function> veranlasst eine saubere Schliessung
     der Payflow Pro-Bibliothek. Auf einen Aufruf dieser Funktion kann
     verzichtet werden, da die Erweiterung automatisch ein
     <function>pfpro_cleanup</function> ausführen wird, nachdem das Script
     beendet wurde.
    </para>
    <para> 
     Siehe auch <function>pfpro_init</function>.
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.pfpro-process">
   <refnamediv>
    <refname>pfpro_process</refname>
    <refpurpose>Führt eine Transaktion mit Payflow Pro aus</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>pfpro_process</function></funcdef>
      <paramdef>array <parameter>parameters</parameter></paramdef>

      <paramdef>string
       <parameter><optional>address</optional></parameter>
      </paramdef>
      <paramdef>int
       <parameter><optional>port</optional></parameter>
      </paramdef>
      <paramdef>int
       <parameter><optional>timeout</optional></parameter>
      </paramdef>
      <paramdef>string
       <parameter><optional>proxy address</optional></parameter>
      </paramdef>
      <paramdef>int
       <parameter><optional>proxy port</optional></parameter>
      </paramdef>
      <paramdef>string
       <parameter><optional>proxy logon</optional></parameter>
      </paramdef>
      <paramdef>string
       <parameter><optional>proxy password</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Gibt einen assoziativen Array, der die Antwort enthält, zurück.
    </para>
    <para> 
     <function>pfpro_process</function> führt eine Transaktion mir Payflow Pro
     aus. Der erste Parameter ist ein assoziativer Array, der die Schlüssel und
     Werte enthält. Diese werden kodiert und an den PFPro-Prozessor
     weitergegeben.
    </para>
    <para>
     Der zweite Parameter ist optional und gibt den Host an, zu dem das
     Script sich verbinden soll. Voreingestellt ist "test.signio.com",
     normalerweise sollte dies in "connect.signio.com" geändert werden,
     um Transaktionen durchzuführen.
    </para>
    <para>
     Der dritte Parameter gibt den Port an, auf den das Script sicher verbinden
     soll. Voreingstellt ist 443, der Standard-SSL-Port.
    </para>
    <para>
     Der vierte Parameter gibt den Timeout-Wert in Sekunden an. Voreingestellt
     ist der Wert 30 Sekunden. Dieser Timeout gilt jedoch nur zu Beginn des
     Scripts, also kann es durchaus sehr lange dauern, wenn ein Netzwerkproblem
     auftritt, nachdem die Verbindung erfolgreich hergestellt wurde.
    </para>
    <para>
     Der fünfte Parameter gibt den SSL-Proxy an, falls dieser benötigt wird.
     Der sechste Parameter gibt den Port des Proxys an.
    </para>
    <para>
     Der siebte und der achte Parameter geben den Login-Namen und das
     Login-Passwort an.
    </para>
    <para>
     Die Funktion gibt einen assoziativen Array der Schlüssel und
     Werte zurück.
    </para>

    <note><para>
     Bitte lesen sie die Payflow Pro Entwicklerdokumentation für alle Details
     zu den erforderlichen Parametern.    
    </para></note>

    <example>
     <title>Payflow Pro Beispiel</title>
     <programlisting role="php">
&lt;?php

pfpro_init();

$transaction = array(USER	=> 'mylogin',
		     PWD	=> 'mypassword',
		     TRXTYPE	=> 'S',
		     TENDER	=> 'C',
		     AMT	=> 1.50,
		     ACCT	=> '4111111111111111',
		     EXPDATE	=> '0904'
		     );

$response = pfpro_process($transaction);

if (!$response) {
  die("Couldn't establish link to Verisign.\n");
}

echo "Verisign response code was ".$response[RESULT];
echo ", which means: ".$response[RESPMSG]."\n";

echo "\nThe transaction request: ";
print_r($transaction);

echo "\nThe response: ";
print_r($response);

pfpro_cleanup();

?>
     </programlisting>
    </example>
   </refsect1>
  </refentry>



  <refentry id="function.pfpro-process-raw">
   <refnamediv>
    <refname>pfpro_process_raw</refname>
    <refpurpose>Führt eine rohe Transaktion mit Payflow Pro aus</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>pfpro_process_raw</function></funcdef>
      <paramdef>string <parameter>parameters</parameter></paramdef>
      <paramdef>string
       <parameter><optional>address</optional></parameter>
      </paramdef>
      <paramdef>int
       <parameter><optional>port</optional></parameter>
      </paramdef>
      <paramdef>int
       <parameter><optional>timeout</optional></parameter>
      </paramdef>
      <paramdef>string
       <parameter><optional>proxy address</optional></parameter>
      </paramdef>
      <paramdef>int
       <parameter><optional>proxy port</optional></parameter>
      </paramdef>
      <paramdef>string
       <parameter><optional>proxy logon</optional></parameter>
      </paramdef>
      <paramdef>string
       <parameter><optional>proxy password</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     Gibt die Antwort in einem String zurück.
    </para>
    <para> 
     <function>pfpro_process_raw</function>
     führt eine rohe Transaktion mit Payflow Pro durch. Es sollte jedoch auf
     jeden Fall <function>pfpro_process</function> verwendet werden, da sonst
     keinerlei Normung vorliegt.
    </para>
    <para>
     Der erste Parameter ist ein String, der die rohe Transaktionsanfrage
     enthält. Alle anderen Parameter sind die Selben wie bei 
     <function>pfpro_process</function>. Der Rückgabewert ist ein String,
     der die rohe Antwort enthält.
    </para>

    <note><para>
     Bitte lesen sie die Payflow Pro Entwicklerdokumentation für alle Details
     zu den erforderlichen Parametern. Es wird empfohlen, die Funktion
     <function>pfpro_process</function> zu verwenden.
    </para></note>

    <example>
     <title>Payflow Pro Beispiel für den Raw-Modus</title>
     <programlisting role="php">
&lt;?php

pfpro_init();

$response = pfpro_process("USER=mylogin&amp;PWD[5]=m&amp;ndy&amp;TRXTYPE=S&amp;TENDER=C&amp;AMT=1.50&amp;ACCT=4111111111111111&amp;EXPDATE=0904");

if (!$response) {
  die("Couldn't establish link to Verisign.\n");
}

echo "Verisign raw response was ".$response;

pfpro_cleanup();

?>
     </programlisting>
    </example>
   </refsect1>
  </refentry>


  <refentry id="function.pfpro-version">
   <refnamediv>
    <refname>pfpro_version</refname>
    <refpurpose>Gibt die Versionsinformationen der Payflow Pro Software
    zurück</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Beschreibung</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>pfpro_version</function></funcdef>
      <void/>
     </funcprototype>
    </funcsynopsis>
    <para> 
     <function>pfpro_version</function> gibt die Versionsinformationen der
     Payflow Pro Bibliothek zurück.
    </para>
   </refsect1>
  </refentry>

 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
